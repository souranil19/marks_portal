{% extends 'base.html' %}
{% load static %}

{% block title %}Notice Board - {{ block.super }}{% endblock %}

{% block extra_css %}
<style>
    /* Custom styles to match the home page theme */
    .hero-notice {
        background: linear-gradient(135deg, var(--primary-blue) 0%, var(--navy) 100%);
        color: white;
        padding: 100px 0 80px;
        position: relative;
        overflow: hidden;
    }
    
    .hero-notice::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('{% static "1.jpg" %}') center/cover;
        opacity: 0.1;
        z-index: 1;
    }
    
    .hero-notice .container {
        position: relative;
        z-index: 2;
    }
    
    .notice-card {
        background: white;
        border-radius: var(--border-radius-lg);
        box-shadow: var(--shadow-lg);
        transition: var(--transition-all);
        border-left: 4px solid var(--primary-blue);
        margin-bottom: 2rem;
    }
    
    .notice-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-xl);
    }
    
    .notice-badge {
        background: var(--primary-blue);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 50px;
        font-size: 0.875rem;
        font-weight: 600;
    }
    
    .notice-date {
        background: var(--gray-100);
        color: var(--gray-700);
        padding: 0.25rem 0.75rem;
        border-radius: 50px;
        font-size: 0.875rem;
        font-weight: 500;
    }
    
    .notice-urgent {
        border-left-color: #dc3545;
    }
    
    .notice-urgent .notice-badge {
        background: #dc3545;
    }
    
    .stats-section {
        background: var(--gray-50);
        padding: 60px 0;
    }
    
    .filter-pills .btn {
        border-radius: 50px;
        margin: 0.25rem;
        font-weight: 500;
    }
    
    .section-title {
        color: var(--gray-900);
        font-weight: 700;
        margin-bottom: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-notice">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8">
                <h1 class="display-4 fw-bold mb-4">
                    <i class="fas fa-bullhorn me-3"></i>Notice Board
                </h1>
                <p class="lead mb-4">
                    Stay updated with the latest announcements, events, and important information from our school
                </p>
                <div class="d-flex justify-content-center gap-3 flex-wrap">
                    <span class="badge bg-light text-dark fs-6 px-3 py-2">
                        <i class="fas fa-calendar me-2"></i>Latest Updates
                    </span>
                    <span class="badge bg-light text-dark fs-6 px-3 py-2">
                        <i class="fas fa-clock me-2"></i>Real-time Notifications
                    </span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="stats-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-3 mb-4">
                <div class="h2 fw-bold" style="color: var(--primary-blue);">{{ total_notices }}+</div>
                <p class="mb-0 text-muted">Active Notices</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="h2 fw-bold" style="color: var(--primary-blue);">{{ this_month_notices }}</div>
                <p class="mb-0 text-muted">This Month</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="h2 fw-bold" style="color: var(--primary-blue);">{{ urgent_notices }}</div>
                <p class="mb-0 text-muted">Urgent</p>
            </div>
            <div class="col-md-3 mb-4">
                <div class="h2 fw-bold" style="color: var(--primary-blue);">100%</div>
                <p class="mb-0 text-muted">Updated</p>
            </div>
        </div>
    </div>
</section>

<!-- Notice Content -->
<section class="py-5">
    <div class="container">
        <!-- Filter Pills -->
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h2 class="section-title mb-4">Filter Notices</h2>
                <div class="filter-pills">
                    <a href="{% url 'notice' %}" class="btn {% if current_filter == 'all' %}btn-primary active{% else %}btn-outline-primary{% endif %}">All Notices</a>
                    <a href="{% url 'notice' %}?filter=academic" class="btn {% if current_filter == 'academic' %}btn-primary active{% else %}btn-outline-primary{% endif %}">Academic</a>
                    <a href="{% url 'notice' %}?filter=event" class="btn {% if current_filter == 'event' %}btn-primary active{% else %}btn-outline-primary{% endif %}">Events</a>
                    <a href="{% url 'notice' %}?filter=admissions" class="btn {% if current_filter == 'admissions' %}btn-primary active{% else %}btn-outline-primary{% endif %}">Admissions</a>
                    <a href="{% url 'notice' %}?filter=urgent" class="btn {% if current_filter == 'urgent' %}btn-primary active{% else %}btn-outline-primary{% endif %}">Urgent</a>
                    <a href="{% url 'notice' %}?filter=results" class="btn {% if current_filter == 'results' %}btn-primary active{% else %}btn-outline-primary{% endif %}">Results</a>
                </div>
            </div>
        </div>

        <!-- Notice Cards -->
        <div class="row">
            {% for notice in notices %}
            <div class="col-lg-6 mb-4">
                <div class="notice-card {% if notice.is_urgent %}notice-urgent{% endif %} p-4 h-100">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <span class="notice-badge" style="background: {{ notice.get_badge_color }};">
                            {{ notice.category }}
                        </span>
                        <span class="notice-date">
                            <i class="fas fa-calendar-alt me-1"></i>{{ notice.date_posted|date:"M d, Y" }}
                        </span>
                    </div>
                    <h4 class="fw-bold mb-3" style="color: var(--gray-900);">
                        {{ notice.title }}
                    </h4>
                    <p class="text-muted mb-3">
                        {{ notice.content|truncatewords:30 }}
                    </p>
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="text-muted small">
                            <i class="fas fa-user me-1"></i>{{ notice.posted_by }}
                        </div>
                        {% if notice.pdf_file and notice.button_text %}
                        <a href="{{ notice.pdf_file.url }}" class="btn btn-sm btn-outline-primary" target="_blank">
                            <i class="fas fa-file-pdf me-1"></i>{{ notice.button_text }}
                        </a>
                        {% elif notice.pdf_file %}
                        <a href="{{ notice.pdf_file.url }}" class="btn btn-sm btn-outline-primary" target="_blank">
                            <i class="fas fa-file-pdf me-1"></i>Download PDF
                        </a>
                        {% elif notice.button_text %}
                        <button class="btn btn-sm btn-outline-primary">
                            {{ notice.button_text }}
                        </button>
                        {% else %}
                        <button class="btn btn-sm btn-outline-primary">
                            Read More
                        </button>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12 text-center">
                <div class="py-5">
                    <i class="fas fa-clipboard-list fa-3x text-muted mb-3"></i>
                    <h4 class="text-muted">No notices found</h4>
                    <p class="text-muted">There are no notices to display at the moment.</p>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Load More Button -->
        <div class="text-center mt-5">
            <button class="btn btn-primary btn-lg rounded-pill px-5">
                <i class="fas fa-plus me-2"></i>Load More Notices
            </button>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Smooth scrolling for any internal links
document.addEventListener('DOMContentLoaded', function() {
    console.log('Notice board loaded');
    
    // You can add any additional JavaScript functionality here
    // For example, notice card animations, modal popups, etc.
});
</script>
{% endblock %}
